version: '3.7'

services:
          ethseer-client:
                image: ethseer-client:0.2.0
                build:
                        context: ./packages/client
                        dockerfile: Dockerfile
                init: true
                networks: [ cluster ]
                ports:
                  - "${CLIENT_PORT:-3000}:3000"
                restart: unless-stopped
                environment:
                  - NEXT_PUBLIC_URL_API=${NEXT_PUBLIC_URL_API}
                  - NEXT_PUBLIC_GOOGLE_ANALYTICS=${NEXT_PUBLIC_GOOGLE_ANALYTICS}
                  - NEXT_PUBLIC_TAG_MANAGER=${NEXT_PUBLIC_TAG_MANAGER}
                  - NEXT_PUBLIC_NETWORK_GENESIS=${NEXT_PUBLIC_NETWORK_GENESIS}
                  - NEXT_PUBLIC_NETWORK_URL=${NEXT_PUBLIC_NETWORK_URL}

          ethseer-server:
                image: ethseer-server:0.2.0
                build:
                        context: ./packages/server
                        dockerfile: Dockerfile
                init: true
                environment:
                  - API_LISTEN_PORT=${API_LISTEN_PORT}
                  - API_LISTEN_IP=${API_LISTEN_IP}
                  - DB_USER=${DB_USER}
                  - DB_HOST=${DB_HOST}
                  - DB_NAME=${DB_NAME}
                  - DB_PORT=${DB_PORT}
                  - DB_PASSWORD=${DB_PASSWORD}
                networks: [ cluster ]
                ports:
                  - "${API_LISTEN_PORT}:3020"
                restart: unless-stopped

networks:
  cluster: